import refs from"./refs.js";import offerCard from"./offerCard.js";let{list,arrow,arrowWrapper,loader}=refs;async function fetchData(){try{var e=await fetch("https://veryfast.io/t/front_test_api.php").then(e=>e.json());if(e&&"ok"===e?.state)return e.result.elements;throw new Error("failed")}catch(e){console.error(e)}}function getBrowserInfo(){var e=navigator.userAgent,r=e.match(/(chrome|safari|firefox)\/?\s*(\d+)/i)||[];return"Chrome"===r[1]&&null!=(e=e.match(/\bEdg\/(\d+)/))?{name:"Edge",version:e[1]}:{name:r[1],version:r[2]}}let browser=getBrowserInfo();function applyStyles(e,r){for(var t in e)arrowWrapper.style[t]=e[t];r?arrow.classList.add("rotate-180"):arrow.classList.remove("rotate-180")}switch(browser.name.toLowerCase()){case"chrome":+browser.version<115?applyStyles({bottom:"70px",left:"10px"},!0):applyStyles({top:"30px",right:"15px"});break;case"firefox":applyStyles({top:"30px",right:"35px"});break;case"edge":applyStyles({top:"30px",right:"25px"});break;default:applyStyles({top:"30px",right:"10px"})}document.addEventListener("DOMContentLoaded",async()=>{loader.style.display="flex";try{var e=(await fetchData()).map(offerCard).join("");list.innerHTML=e,document.querySelectorAll(".offer__download").forEach(e=>{e.addEventListener("click",()=>{arrowWrapper&&setTimeout(()=>{arrowWrapper.style.display="block"},1500)})})}catch(e){console.log("err",e)}finally{loader.style.display="none"}});