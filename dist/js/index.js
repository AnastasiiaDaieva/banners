import refs from"./refs.js";import offerCard from"./offerCard.js";const{list:list,arrow:arrow,arrowWrapper:arrowWrapper,loader:loader}=refs;async function fetchData(){try{const r=await fetch("https://veryfast.io/t/front_test_api.php").then((r=>r.json()));if(!r||"ok"!==r?.state)throw new Error("failed");return r.result.elements}catch(r){console.error(r)}}function getBrowserInfo(){const r=navigator.userAgent;let e;const t=r.match(/(chrome|safari|firefox)\/?\s*(\d+)/i)||[];if("Chrome"===t[1]&&(e=r.match(/\bEdg\/(\d+)/),null!=e))return{name:"Edge",version:e[1]};return{name:t[1],version:t[2]}}const browser=getBrowserInfo();function applyStyles(r,e){for(const e in r)arrowWrapper.style[e]=r[e];e?arrow.classList.add("rotate-180"):arrow.classList.remove("rotate-180")}switch(browser.name.toLowerCase()){case"chrome":+browser.version<115?applyStyles({bottom:"70px",left:"10px"},!0):applyStyles({top:"30px",right:"15px"});break;case"firefox":applyStyles({top:"30px",right:"35px"});break;case"edge":applyStyles({top:"30px",right:"25px"});break;default:applyStyles({top:"30px",right:"10px"})}document.addEventListener("DOMContentLoaded",(async()=>{loader.style.display="flex";try{const r=(await fetchData()).map(offerCard).join("");list.innerHTML=r;document.querySelectorAll(".offer__download").forEach((r=>{r.addEventListener("click",(()=>{arrowWrapper&&setTimeout((()=>{arrowWrapper.style.display="block"}),1500)}))}))}catch(r){console.log("err",r)}finally{loader.style.display="none"}}));